<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .form-check-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #808080; /* Light grey for deselected datasets */
            cursor: pointer;
        }
        .form-check-label.active {
            color: black; /* Black for selected datasets */
        }
        .instructions {
            text-align: center;
            margin-top: 10px;
            font-style: italic;
            font-size: 14px; /* Adjust font size to match labels */
        }
    </style>

    <title>Komune Fast Casual Lunch Snowflake Analysis</title>
</head>
<body style="background-color: #f0f0f0;"> <!-- Change the color here -->
<div class="container">
    <div class="row justify-content-center mt-5">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title text-center">Komune Clothing Brand Snowflake Analysis</h5>
                    <div class="instructions">
                        yummy sustenance plopped in a bowl
                    </div>
                    <hr>
                    <div class="chart-container" style="position: relative; height: 400px; width: 100%;">
                        <canvas id="myChart"></canvas>
                    </div>
                    <div class="mt-3">
                        <div id="datasetCheckboxes" class="form-check">
                            <!-- Checkboxes will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const ctx = document.getElementById('myChart').getContext('2d');

    var chartData = {
        labels: ["Price", "Taste", "Speed", "Variety", "Ambiance"],
        datasets: [
            {
                label: "Chipotle",
                data: [8, 6, 6, 3, 2],
                backgroundColor: 'rgba(0, 123, 255, 0.2)',
                pointBackgroundColor: 'rgba(0, 123, 255, 1)',
                borderColor: 'rgba(0, 123, 255, 1)',
                borderWidth: 1,
                pointRadius: 3,
                hidden: true
            },
            {
                label: "Cava",
                data: [7, 7, 4, 9, 4],
                backgroundColor: 'rgba(183, 17, 235, 0.2)',
                pointBackgroundColor: 'rgba(183, 17, 235, 1)',
                borderColor: 'rgba(183, 17, 235, 1)',
                borderWidth: 1,
                pointRadius: 3,
                hidden: true
            },
            {
                label: "Naya",
                data: [7, 8, 7, 7, 6],
                backgroundColor: 'rgba(20, 243, 73, 0.2)',
                pointBackgroundColor: 'rgba(20, 243, 73, 1)',
                borderColor: 'rgba(20, 243, 73, 1)',
                borderWidth: 1,
                pointRadius: 3,
                hidden: true
            },
            {
                label: "Sweetgreen",
                data: [5, 6, 5, 7, 5],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1,
                pointRadius: 3,
                hidden: true
            }
        ],
    };

    var chartOptions = {
        scale: {
            ticks: {
                beginAtZero: true,
                suggestedMin: 0,
            }
        },
        responsive: true,
        maintainAspectRatio: false,
        elements: {
            line: {
                borderWidth: 3
            }
        },
        plugins: {
            legend: {
                onClick: (e) => {
                    e.stopPropagation();
                }
            }
        }
    };

    var myChart = new Chart(ctx, {
        type: 'radar',
        data: chartData,
        options: chartOptions
    });

    // Generate checkboxes dynamically
    var checkboxesContainer = document.getElementById('datasetCheckboxes');
    chartData.datasets.forEach((dataset, index) => {
        if (dataset.label !== 'Minimum' && dataset.label !== 'Maximum') {
            var checkboxId = `datasetCheckbox${index}`;
            checkboxesContainer.innerHTML += `
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="${index}" id="${checkboxId}" onclick="toggleDataset(${index})">
                    <label class="form-check-label" for="${checkboxId}">
                        ${dataset.label}
                    </label>
                </div>
            `;
        }
    });
    // Function to toggle dataset visibility and update legend color
    function toggleDataset(index) {
        var dataset = myChart.data.datasets[index];
        dataset.hidden = !dataset.hidden;
        var checkbox = document.getElementById(`datasetCheckbox${index}`);
        checkbox.checked = !dataset.hidden;

        var legendItem = myChart.legend.legendItems[index];

        if (!dataset.hidden) {
            checkbox.parentElement.querySelector('label').classList.add('active');
            legendItem.text = dataset.label;
        } else {
            checkbox.parentElement.querySelector('label').classList.remove('active');
            legendItem.text = `<span style="color: #808080">${dataset.label}</span>`;
        }

        myChart.update();
    }
</script>

</body>
</html>
